{% extends 'upvote/layout/base.html' %}

{% block content %}
    <p>
        <form method="post" action="{% url 'upvote:index' %}">
            {% csrf_token %}
            {{ submission_form }}
            <input type="submit" value="Submit" />
        </form>
    </p>
    <p>
    {% if top_submissions %}
        <div class="infinite-container">
            {% for submission in top_submissions %}
                <div class="infinite-item">
                    <a href="{% url 'upvote:detail' submission.word %}"> {{ submission.word }}</a>
                    <form action="{% url 'upvote:vote' submission.word %}" method="post">
                        {% csrf_token %}
                        <a href="">{{ submission.vote_set.count }}</strong>
                        <input type="hidden" value="{{ submission.word }}" />
                        <button type="submit">Vote</button>
                    </form>
                    <a href="">Share</a></li>
                </div>
            {% endfor %}
        </div>
        {% if top_submissions.has_next %}
            <a class="infinite-more-link" href="?page={{ top_submissions.next_page_number }}">Load More</a>
        {% endif %}
    {% else %}
        <p>Be the first to add your word!</p>
    {% endif %}
    </p>
    <script>
        var infinite = new Waypoint.Infinite({
        element: $('.infinite-container')[0]
        });
    </script>
{% endblock %}